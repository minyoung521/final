<!DOCTYPE HTML>
<html>
{% load static %}
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>돔고돔락</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Free HTML5 Website Template by freehtml5.co" />
	<meta name="keywords" content="free website templates, free html5, free template, free bootstrap, free website template, html5, css3, mobile first, responsive" />
	<meta name="author" content="freehtml5.co" />

  	<!-- Facebook and Twitter integration -->
	<meta property="og:title" content=""/>
	<meta property="og:image" content=""/>
	<meta property="og:url" content=""/>
	<meta property="og:site_name" content=""/>
	<meta property="og:description" content=""/>
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Roboto+Slab:300,400" rel="stylesheet">

	<!-- Animate.css -->
	<link rel="stylesheet" href="{% static 'css/animate.css' %}">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="{% static 'css/icomoon.css' %}">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">

	<!-- Owl Carousel  -->
	<link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
	<link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}">

	<!-- Flexslider  -->
	<link rel="stylesheet" href="{% static 'css/flexslider.css' %}">

	<!-- Pricing -->
	<link rel="stylesheet" href="{% static 'css/pricing.css' %}">

	<!-- Theme style  -->
	<link rel="stylesheet" href="{% static 'css/style.css' %}">

	<!-- Modernizr JS -->
	<script src="{% static 'js/modernizr-2.6.2.min.js' %}"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="{% static 'js/respond.min.js' %}"></script>
	<![endif]-->

  <meta charset="utf-8">
  <title>편의시설</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      margin: 0;
      background-color: #f3dede;
      font-family: 'Noto Sans KR', sans-serif;
    }

    .header-bar {
      position: relative;
      width: 100%;
      height: 80px;
      background-color: #f3dede;
      padding-left: 30px;
      display: flex;
      align-items: center;
    }

    .button-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .button-group button {
      border: none;
      background-color: #ffffff;
      border-radius: 4px;
      padding: 6px 12px;
      cursor: pointer;
      font-size: 14px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .button-group button:hover {
      background-color: #e9ecef;
    }

    .section-title {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      font-size: 22px;
      font-weight: bold;
      white-space: nowrap;
    }

    #map { height: 50vh; width: 100%; }
  </style>
</head>

<body>


<div id="page">
   <nav class="fh5co-nav" role="navigation">
      <div class="top">
         <div class="container">
            <div class="row">
               <div class="col-xs-12 text-right">
                  <p class="site"></p>
                  <p class="num">Call: +01 123 456 7890</p>
                  <ul class="fh5co-social">
                     <li><a href="#"><i class="icon-facebook2"></i></a></li>
                     <li><a href="#"><i class="icon-twitter2"></i></a></li>
                     <li><a href="#"><i class="icon-dribbble2"></i></a></li>
                     <li><a href="#"><i class="icon-github"></i></a></li>
                  </ul>
               </div>
            </div>
         </div>
      </div>

      <div class="top-menu">
         <div class="container">
            <div class="row">
               <div class="col-xs-2">
                  <div id="fh5co-logo"><a href="{% url 'web:home' %}"><i class="icon-study"></i>돔고돔락<span></span></a></div>
               </div>
               <div class="col-xs-10 text-right menu-1">
                  <ul>
                     <li><a href="{% url 'web:home' %}">홈페이지</a></li>
                     <li class="has-dropdown">
                        <a href="{% url 'web:guide' %}">생활관 안내</a>
                        <ul class="dropdown">
                           {% if user.is_authenticated %}
                           <li><a href="{% url 'web:check_in' %}">입실 신청</a></li>
                           <li><a href="{% url 'web:outside' %}">외박 신청</a></li>
                           <li><a href="{% url 'web:info' %}">생활관 안내</a></li>
                           <li><a href="{% url 'web:rules' %}">생활관 규칙</a></li>
                           {% else %}
                           <li><a href="" onclick="alert('로그인이 필요한 페이지입니다.'); window.location.href='{% url 'web:login' %}'; return false;">입실 신청</a></li>
                           <li><a href="" onclick="alert('로그인이 필요한 페이지입니다.'); window.location.href='{% url 'web:login' %}'; return false;">외박 신청</a></li>
                           <li><a href="{% url 'web:info' %}">생활관 안내</a></li>
                           <li><a href="{% url 'web:rules' %}">생활관 규칙</a></li>
                           {% endif %}
                        </ul>
                     </li>
                     <li class="has-dropdown">
                        <a href="{% url 'web:community' %}">커뮤니티</a>
                        <ul class="dropdown">
                           {% if user.is_authenticated %}
                           <li><a href="{% url 'web:notice' %}">공지 사항</a></li>
                           <li><a href="{% url 'web:community_home' %}">자유 게시판</a></li>
                           {% else %}
                           <li><a href="" onclick="alert('로그인이 필요한 페이지입니다.'); window.location.href='{% url 'web:login' %}'; return false;">공지 사항</a></li>
                           <li><a href="" onclick="alert('로그인이 필요한 페이지입니다.'); window.location.href='{% url 'web:login' %}'; return false;">자유 게시판</a></li>
                           {% endif %}
                        </ul>
                     </li>
                     <li class="has-dropdown">
                        {% if user.is_authenticated %}
                           <a href="{% url 'web:mypage' %}">마이페이지</a>
                        {% else %}
                           <a href="" onclick="alert('로그인이 필요한 페이지입니다.'); window.location.href='{% url 'web:login' %}'; return false;">마이페이지</a>
                        {% endif %}
                     </li>
                     {% if user.is_authenticated %}
                    <li class="btn-cta" style="margin-right: 10px;">
                       <span class="btn-cta">{{ user.userprofile.full_name|default:user.username }}님, 환영합니다!</span>
                    </li>
                    <li class="btn-cta">
                       <form method="post" action="{% url 'web:logout' %}" style="display: inline;">
                          {% csrf_token %}
                          <button type="submit" class="btn btn-link p-0" style="text-decoration: none; color: blue;">
                             로그아웃
                          </button>
                       </form>
                    </li>
                    {% else %}
                    <li class="btn-cta">
                       <a href="{% url 'web:login' %}"><span>로그인</span></a>
                    </li>
                    {% endif %}

                  </ul>
               </div>
            </div>
         </div>
      </div>
   </nav>

<div class="container d-flex justify-content-center my-3">
  <div style="max-width: 1000px; width: 100%;">
      <!-- 제목: 한 줄에 단독으로 배치 -->
      <div class="container mt-4 text-center">
          <h2 class="fw-bold">편의시설</h2>
      </div>

        <!-- 버튼: 아래에 따로 정렬 -->
      <div class="container d-flex justify-content-center mb-2">
      <div class="btn-group" role="group">
      <button class="btn btn-light" onclick="filterMarkers('식당')">식당</button>
      <button class="btn btn-light" onclick="filterMarkers('편의점')">편의점</button>
      <button class="btn btn-light" onclick="filterMarkers('카페')">카페</button>
      <button class="btn btn-light" onclick="filterMarkers('주유소')">주유소</button>
      <button class="btn btn-light" onclick="filterMarkers('전체')">전체 보기</button>
      </div>
      </div>

    <div id="map" style="height: 400px; width: 100%; border-radius: 10px;"></div>
  </div>
</div>

  <!-- Kakao 지도 API -->
  <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=aca3f50bafe4f955bd781786417506fb&libraries=services,geometry"></script>
  <script>
    const locations = [
      { lat: 36.8514, lng: 127.0615, title: "중앙 정류장", category: "정류장" },
      { lat: 36.8505, lng: 127.0620, title: "GS25", category: "편의점" },
      { lat: 36.8505, lng: 127.0620, title: "블루포트 카페", category: "카페" },
      { lat: 36.8506, lng: 127.0606, title: "교내식당", category: "식당" },
      { lat: 36.8498, lng: 127.0510, title: "이마트 24", category: "편의점" },
      { lat: 36.8499, lng: 127.0510, title: "삼순이 감자탕", category: "식당" },
      { lat: 36.8496, lng: 127.0511, title: "커피에 반하다", category: "카페" },
      { lat: 36.8495, lng: 127.0511, title: "기봉이 김밥", category: "식당" },
      { lat: 36.8494, lng: 127.0512, title: "도향", category: "식당" },
      { lat: 36.8456, lng: 127.0449, title: "CU", category: "편의점" },
      { lat: 36.8456, lng: 127.0449, title: "카페 온더웨이", category: "카페" },
      { lat: 36.8455, lng: 127.0472, title: "GS25", category: "편의점" },
      { lat: 36.8450, lng: 127.0481, title: "SK 주유소", category: "주유소" },
      { lat: 36.8462, lng: 127.0505, title: "이레 관광농원 대동 소머리국밥", category: "식당" },
      { lat: 36.8450, lng: 127.0478, title: "세븐일레븐", category: "편의점" },
    ];

let map;
let markers = [];

window.onload = function () {
  const mapCenter = new kakao.maps.LatLng(36.8514, 127.0615);

  map = new kakao.maps.Map(document.getElementById('map'), {
    center: mapCenter,
    level: 6
  });

  // 마커 생성하되 지도에는 표시하지 않음
  locations.forEach(loc => {
    const marker = new kakao.maps.Marker({
      position: new kakao.maps.LatLng(loc.lat, loc.lng),
      map: null,
      title: loc.title  // 마커의 title 속성도 설정해둠 (기본 툴팁)
    });

    // 인포윈도우 생성
    const infoWindow = new kakao.maps.InfoWindow({
      content: `<div style="padding:5px;font-size:13px;">${loc.title}</div>`,
    });

    // 마우스 올리면 인포윈도우 표시
    kakao.maps.event.addListener(marker, 'mouseover', function () {
      infoWindow.open(map, marker);
    });

    // 마우스 나가면 인포윈도우 닫기
    kakao.maps.event.addListener(marker, 'mouseout', function () {
      infoWindow.close();
    });

    marker.category = loc.category;
    marker.infoWindow = infoWindow;  // 필요 시 닫기 위해 저장
    markers.push(marker);
  });
};

function filterMarkers(category) {
  markers.forEach(marker => {
    if (category === '전체' || marker.category === category) {
      marker.setMap(map);
    } else {
      marker.setMap(null);
      marker.infoWindow.close();  // 숨길 때 인포윈도우도 닫음
    }
  });
}

  </script>
</div>
</body>
</html>
