<!DOCTYPE HTML>
<html>
{% load static %}
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>돔고돔락</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Free HTML5 Website Template by freehtml5.co" />
	<meta name="keywords" content="free website templates, free html5, free template, free bootstrap, free website template, html5, css3, mobile first, responsive" />
	<meta name="author" content="freehtml5.co" />

  	<!-- Facebook and Twitter integration -->
	<meta property="og:title" content=""/>
	<meta property="og:image" content=""/>
	<meta property="og:url" content=""/>
	<meta property="og:site_name" content=""/>
	<meta property="og:description" content=""/>
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Roboto+Slab:300,400" rel="stylesheet">

	<!-- Animate.css -->
	<link rel="stylesheet" href="{% static 'css/animate.css' %}">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="{% static 'css/icomoon.css' %}">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">

	<!-- Owl Carousel  -->
	<link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
	<link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}">

	<!-- Flexslider  -->
	<link rel="stylesheet" href="{% static 'css/flexslider.css' %}">

	<!-- Pricing -->
	<link rel="stylesheet" href="{% static 'css/pricing.css' %}">

	<!-- Theme style  -->
	<link rel="stylesheet" href="{% static 'css/style.css' %}">

	<!-- Modernizr JS -->
	<script src="{% static 'js/modernizr-2.6.2.min.js' %}"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="{% static 'js/respond.min.js' %}"></script>
	<![endif]-->

	</head>
	<body>

	<div class="fh5co-loader"></div>

	<div id="page">
	<nav class="fh5co-nav" role="navigation">
      <div class="top">
         <div class="container">
            <div class="row">
               <div class="col-xs-12 text-right">
                  <p class="site"></p>
                  <p class="num">Call: +01 123 456 7890</p>
                  <ul class="fh5co-social">
                     <li><a href="#"><i class="icon-facebook2"></i></a></li>
                     <li><a href="#"><i class="icon-twitter2"></i></a></li>
                     <li><a href="#"><i class="icon-dribbble2"></i></a></li>
                     <li><a href="#"><i class="icon-github"></i></a></li>
                  </ul>
               </div>
            </div>
         </div>
      </div>

      <div class="top-menu">
         <div class="container">
            <div class="row">
               <div class="col-xs-2">
                  <div id="fh5co-logo"><a href="{% url 'web:home' %}"><i class="icon-study"></i>돔고돔락<span></span></a></div>
               </div>
               <div class="col-xs-10 text-right menu-1">
                  <ul>
                     <li><a href="{% url 'web:home' %}">홈페이지</a></li>
                     <li class="has-dropdown">
                        <a href="{% url 'web:guide' %}">생활관 안내</a>
                        <ul class="dropdown">
                           {% if user.is_authenticated %}
                           <li><a href="{% url 'web:check_in' %}">입실 신청</a></li>
                           <li><a href="{% url 'web:outside' %}">외박 신청</a></li>
                           <li><a href="{% url 'web:info' %}">생활관 안내</a></li>
                           <li><a href="{% url 'web:rules' %}">생활관 규칙</a></li>
                           {% else %}
                           <li><a href="" onclick="alert('로그인이 필요한 페이지입니다.'); window.location.href='{% url 'web:login' %}'; return false;">입실 신청</a></li>
                           <li><a href="" onclick="alert('로그인이 필요한 페이지입니다.'); window.location.href='{% url 'web:login' %}'; return false;">외박 신청</a></li>
                           <li><a href="{% url 'web:info' %}">생활관 안내</a></li>
                           <li><a href="{% url 'web:rules' %}">생활관 규칙</a></li>
                           {% endif %}
                        </ul>
                     </li>
                     <li class="has-dropdown">
                        <a href="{% url 'web:community' %}">커뮤니티</a>
                        <ul class="dropdown">
                           {% if user.is_authenticated %}
                           <li><a href="{% url 'web:notice' %}">공지 사항</a></li>
                           <li><a href="{% url 'web:community_home' %}">자유 게시판</a></li>
                           {% else %}
                           <li><a href="" onclick="alert('로그인이 필요한 페이지입니다.'); window.location.href='{% url 'web:login' %}'; return false;">공지 사항</a></li>
                           <li><a href="" onclick="alert('로그인이 필요한 페이지입니다.'); window.location.href='{% url 'web:login' %}'; return false;">자유 게시판</a></li>
                           {% endif %}
                        </ul>
                     </li>
                     <li class="has-dropdown">
                        {% if user.is_authenticated %}
                           <a href="{% url 'web:mypage' %}">마이페이지</a>
                        {% else %}
                           <a href="" onclick="alert('로그인이 필요한 페이지입니다.'); window.location.href='{% url 'web:login' %}'; return false;">마이페이지</a>
                        {% endif %}
                     </li>
                     {% if user.is_authenticated %}
                    <li class="btn-cta" style="margin-right: 10px;">
                       <span class="btn-cta">{{ user.userprofile.full_name|default:user.username }}님, 환영합니다!</span>
                    </li>
                    <li class="btn-cta">
                       <form method="post" action="{% url 'web:logout' %}" style="display: inline;">
                          {% csrf_token %}
                          <button type="submit" class="btn btn-link p-0" style="text-decoration: none; color: blue;">
                             로그아웃
                          </button>
                       </form>
                    </li>
                    {% else %}
                    <li class="btn-cta">
                       <a href="{% url 'web:login' %}"><span>로그인</span></a>
                    </li>
                    {% endif %}

                  </ul>
               </div>
            </div>
         </div>
      </div>
   </nav>


	<div class="container" style="margin-top: 80px; min-height: 80vh;">
	  <div class="row">
		<div class="col-md-8 col-md-offset-2" style="background-color: #fff; padding: 30px; border: 1px solid #ddd; border-radius: 6px;">
		  <h4 class="text-center mb-4">공지사항 글쓰기</h4>

		  <form method="POST" enctype="multipart/form-data" class="post-form">
			{% csrf_token %}
			<table class="table table-bordered">
			  <tr>
				<th style="width: 20%;">제목</th>
				<td>
				  <input type="text" name="title" maxlength="200" class="form-control"
						 oninput="updateCharCount(this, 'title-count', 200)"
						 value="{{ request.POST.title }}">
				  <small><span id="title-count">0</span>/200자</small>
				</td>
			  </tr>
			  <tr>
				<th>내용</th>
				<td>
				  <textarea name="content" maxlength="1000" class="form-control" rows="5"
							oninput="updateCharCount(this, 'content-count', 1000)">{{ request.POST.content }}</textarea>
				  <small><span id="content-count">0</span>/1000자</small>
				</td>
			  </tr>
			  <tr>
				<th>파일 첨부</th>
				<td>
				  <input type="file" name="file_upload" class="form-control">
				</td>
			  </tr>
			</table>

			<div class="text-right">
			  <button type="submit" class="btn btn-primary">등록</button>
			  <a href="{% url 'web:notice' %}" class="btn btn-secondary">취소</a>
			</div>
		  </form>
		</div>
	  </div>
	</div>

	<script>
	  function updateCharCount(el, counterId, maxLen) {
		const count = el.value.length;
		document.getElementById(counterId).innerText = count;
	  }
	</script>

	<script>
	  function updateCharCount(el, counterId, maxLen) {
		const count = el.value.length;
		document.getElementById(counterId).innerText = count;
	  }

	  function saveNoticeToLocal() {
		const title = document.querySelector('input[name="username"]').value.trim();
		const content = document.querySelector('textarea[name="request"]').value.trim();
		const file = document.querySelector('input[name="file_upload"]').files[0];

		if (!title || !content) {
		  alert("제목과 내용을 입력하세요.");
		  return;
		}

		const notice = {
		  title: title,
		  content: content,
		  fileName: file ? file.name : '',
		  created_at: new Date().toISOString()
		};

		let notices = JSON.parse(localStorage.getItem("notices") || "[]");
		notices.unshift(notice);  // 최신글 위로
		localStorage.setItem("notices", JSON.stringify(notices));

		window.location.href = "{% url 'web:notice' %}";  // 리스트 페이지로 이동 (URL에 맞게 수정)
	  }
	</script>

		<form method="POST" enctype="multipart/form-data">
			{% csrf_token %}
			<table class="table table-bordered">
				<tr>
					<th>제목</th>
					<td><input type="text" name="title" class="form-control"></td>
				</tr>
				<tr>
					<th>내용</th>
					<td><textarea name="content" class="form-control"></textarea></td>
				</tr>
			</table>
			<div class="text-right">
				<button type="submit" class="btn btn-primary">등록</button>
			</div>
		</form>



	<!-- jQuery -->
	<script src="{% static 'js/jquery.min.js' %}"></script>
	<!-- jQuery Easing -->
	<script src="{% static 'js/jquery.easing.1.3.js' %}"></script>
	<!-- Bootstrap -->
	<script src="{% static 'js/bootstrap.min.js' %}"></script>
	<!-- Waypoints -->
	<script src="{% static 'js/jquery.waypoints.min.js' %}"></script>
	<!-- Stellar Parallax -->
	<script src="{% static 'js/jquery.stellar.min.js' %}"></script>
	<!-- Carousel -->
	<script src="{% static 'js/owl.carousel.min.js' %}"></script>
	<!-- Flexslider -->
	<script src="{% static 'js/jquery.flexslider-min.js' %}"></script>
	<!-- countTo -->
	<script src="{% static 'js/jquery.countTo.js' %}"></script>
	<!-- Magnific Popup -->
	<script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
	<script src="{% static 'js/magnific-popup-options.js' %}"></script>
	<!-- Count Down -->
	<script src="{% static 'js/simplyCountdown.js' %}"></script>
	<!-- Main -->
	<script src="{% static 'js/main.js' %}"></script>
	<script>
    var d = new Date(new Date().getTime() + 1000 * 120 * 120 * 2000);

    // default example
    simplyCountdown('.simply-countdown-one', {
        year: d.getFullYear(),
        month: d.getMonth() + 1,
        day: d.getDate()
    });

    //jQuery example
    $('#simply-countdown-losange').simplyCountdown({
        year: d.getFullYear(),
        month: d.getMonth() + 1,
        day: d.getDate(),
        enableUtc: false
    });
	</script>
    </div>
	</body>
</html>

